!function(){"use strict";angular.module("ngL20n",[]).factory("l20n",["$rootScope",function(e){var t={init:function(){var t;t=this.context=L20n.getContext(),t.registerLocales.apply(t,this.allLocales),t.linkResource(function(e){return"/locales/"+e+".l20n"}),e.changeLocale=function(t){e.locale=t},localStorage.getItem("locale")||localStorage.setItem("locale",this.defaultLocale),t.addEventListener("ready",function a(){t.removeEventListener("ready",a),t.registerLocales(e.locale),e.$watch("locale",function(e){e&&(localStorage.setItem("locale",e),t.registerLocales(e))})}),e.locale=localStorage.getItem("locale"),t.freeze()},allLocales:["en-US","pl"],get defaultLocale(){if(-1!==this.allLocales.indexOf(navigator.language))return navigator.language;var e=_.filter(this.all,function(e){return-1!==e.indexOf(navigator.language)})[0];return e?e:this.allLocales[0]},updateData:function(){var e,t=this.context;t.updateData.apply(t,arguments),e=document.createEvent("HTMLEvents"),e.initEvent("l20n:dataupdated",!0,!0),document.dispatchEvent(e)}};return t.init(),t}]).directive("l20n",["l20n",function(e){return function(t,a,n){function l(){a.text(o.get(n.l20n))}var o=e.context;o.ready(function(){document.addEventListener("l20n:dataupdated",l),l()})}}])}();